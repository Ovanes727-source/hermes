 workflows:
  android-debug:
    name: Android Debug Build
    max_build_duration: 30
    environment:
      vars:
        PACKAGE_NAME: "com.example.hermes"
    scripts:
      - name: Show Project Structure
        script: |
          echo "ðŸ“ Ð¡Ð¢Ð Ð£ÐšÐ¢Ð£Ð Ð ÐŸÐ ÐžÐ•ÐšÐ¢Ð"
          echo "===================="
          pwd
          ls -la
          
      - name: Try Simple Build
        script: |
          echo "ðŸš€ ÐŸÐ ÐžÐ‘Ð£Ð•Ðœ Ð¡Ð‘ÐžÐ ÐšÐ£"
          echo "================"
          
          # ÐŸÑ€Ð¾Ð±ÑƒÐµÐ¼ Ñ€Ð°Ð·Ð½Ñ‹Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ñ‹
          echo "1. Ð˜Ñ‰ÐµÐ¼ gradlew..."
          if [ -f "gradlew" ]; then
            echo "ÐÐ°Ð¹Ð´ÐµÐ½ gradlew, Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼..."
            chmod +x gradlew
            ./gradlew tasks --dry-run || true
            ./gradlew assembleDebug || true
          fi
          
          echo ""
          echo "2. Ð˜Ñ‰ÐµÐ¼ build.gradle..."
          if [ -f "build.gradle" ] || [ -f "build.gradle.kts" ]; then
            echo "ÐÐ°Ð¹Ð´ÐµÐ½ build.gradle, Ð¿Ñ€Ð¾Ð±ÑƒÐµÐ¼ gradle..."
            gradle tasks --dry-run 2>&1 | head -20 || true
            gradle assembleDebug 2>&1 | tail -50 || true
          fi
          
          echo ""
          echo "3. Ð˜Ñ‰ÐµÐ¼ Ð² Ð¿Ð°Ð¿ÐºÐµ app..."
          if [ -f "app/build.gradle" ] || [ -f "app/build.gradle.kts" ]; then
            echo "ÐÐ°Ð¹Ð´ÐµÐ½ app/build.gradle..."
            if [ ! -f "settings.gradle" ] && [ ! -f "settings.gradle.kts" ]; then
              echo "include ':app'" > settings.gradle
            fi
            gradle assembleDebug 2>&1 | tail -50 || true
          fi
          
          echo ""
          echo "4. Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚..."
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚ÐµÐ¹ÑˆÐ¸Ð¹ build.gradle Ð±ÐµÐ· ÑÐ»Ð¾Ð¶Ð½Ð¾Ð³Ð¾ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ°
          cat > simple_build.gradle << "EOF"
allprojects {
    task hello {
        doLast {
            println "Hello from Gradle"
        }
    }
}
EOF
          
          gradle -b simple_build.gradle hello || true
          
      - name: List APK Files
        script: |
          echo "ðŸ“¦ ÐŸÐžÐ˜Ð¡Ðš APK"
          echo "==========="
          find . -name "*.apk" -type f
          echo ""
          echo "Ð’ÑÐµÐ³Ð¾ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾: $(find . -name "*.apk" -type f 2>/dev/null | wc -l)"
          
    artifacts:
      - "**/*.apk"
      
    publishing:
      email:
        recipients:
          - ovanes727@icloud.com
