workflows:
  android-debug:
    name: Android Build
    max_build_duration: 60
    scripts:
      - name: Find correct build task
        script: |
          echo "ğŸ” Ğ˜Ñ‰ĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½ÑƒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ ÑĞ±Ğ¾Ñ€ĞºĞ¸..."
          
          # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ’Ğ¡Ğ• Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
          echo "Ğ’ÑĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Gradle:"
          gradle tasks --all 2>&1 | grep -E "(assemble|build|compile|package)" | head -30
          
          echo ""
          echo "ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹:"
          
          echo "1. :app:assemble..."
          gradle :app:assemble --stacktrace 2>&1 | tail -20 || true
          
          echo ""
          echo "2. :app:build..."
          gradle :app:build --stacktrace 2>&1 | tail -20 || true
          
          echo ""
          echo "3. assemble..."
          gradle assemble --stacktrace 2>&1 | tail -20 || true
          
          echo ""
          echo "4. build..."
          gradle build --stacktrace 2>&1 | tail -20 || true
          
      - name: Build with correct task
        script: |
          echo "ğŸš€ ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ°..."
          # ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ€ĞµĞ»Ğ¸Ğ· ĞµÑĞ»Ğ¸ Ğ´ĞµĞ±Ğ°Ğ³ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
          gradle :app:assemble --stacktrace || \
          gradle :app:build --stacktrace || \
          gradle assemble --stacktrace || \
          echo "âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ ÑĞ±Ğ¾Ñ€ĞºĞ¸"
          
      - name: Search results
        script: |
          echo "ğŸ” Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ° APK:"
          find . -type f -name "*.apk" 2>/dev/null
          
          echo ""
          echo "ğŸ“ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ app/build:"
          ls -la app/build/ 2>/dev/null || echo "ĞŸĞ°Ğ¿ĞºĞ° app/build Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°"
          
          echo ""
          echo "ğŸ“ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ app/build/outputs:"
          find app/build/outputs -type f 2>/dev/null | head -20 || true
          
    artifacts:
      - "**/*.apk"
      - "app/build/outputs/**/*"
      
    publishing:
      email:
        recipients:
          - ovanes727@icloud.com
